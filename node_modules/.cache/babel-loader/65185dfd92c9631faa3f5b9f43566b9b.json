{"remainingRequest":"C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\WolfChat\\chat\\src\\views\\Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\WolfChat\\chat\\src\\views\\Chat.vue","mtime":1564754607488},{"path":"C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\WolfChat\\chat\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CreateMessage from '@/components/CreateMessage';\nimport fb from '@/firebase/init';\nimport moment from 'moment';\nexport default {\n  name: 'Chat',\n  props: ['lat', 'lng'],\n  components: {\n    CreateMessage: CreateMessage\n  },\n  data: function data() {\n    return {\n      users: [],\n      name: \"\"\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    var ref = fb.collection('users').orderBy('timestamp');\n    ref.onSnapshot(function (snapshot) {\n      snapshot.docChanges().forEach(function (change) {\n        if (change.type = 'added') {\n          var doc = change.doc;\n\n          _this.users.push({\n            id: doc.id,\n            chatname: doc.data().chatname,\n            lat: doc.data().lat,\n            lng: doc.data().lng,\n            timestamp: moment(doc.data().timestamp).format('LTS')\n          });\n        }\n      });\n    });\n  },\n  mounted: function mounted() {\n    this.name = localStorage.getItem('username');\n  },\n  methods: {\n    pickLocation: function pickLocation() {\n      console.log(\"Choose the chat location on the map\");\n      this.$root.$emit('setLocation');\n    },\n    gotoMessages: function gotoMessages(messageid, lat, lng) {\n      localStorage.latitude = lat;\n      localStorage.longitude = lng;\n      localStorage.setItem('ChatId', messageid);\n      this.$router.push({\n        name: 'Messages'\n      });\n    }\n  }\n};",{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,aAAA,MAAA,4BAAA;AACA,OAAA,EAAA,MAAA,iBAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,KAAA,EAAA,CAAA,KAAA,EAAA,KAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA;AADA,GAHA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GAXA;AAYA,EAAA,OAZA,qBAYA;AAAA;;AACA,QAAA,GAAA,GAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,OAAA,CAAA,WAAA,CAAA;AACA,IAAA,GAAA,CAAA,UAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,UAAA,GAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,GAAA,OAAA,EAAA;AACA,cAAA,GAAA,GAAA,MAAA,CAAA,GAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,EAAA,EAAA,GAAA,CAAA,EADA;AAEA,YAAA,QAAA,EAAA,GAAA,CAAA,IAAA,GAAA,QAFA;AAGA,YAAA,GAAA,EAAA,GAAA,CAAA,IAAA,GAAA,GAHA;AAIA,YAAA,GAAA,EAAA,GAAA,CAAA,IAAA,GAAA,GAJA;AAKA,YAAA,SAAA,EAAA,MAAA,CAAA,GAAA,CAAA,IAAA,GAAA,SAAA,CAAA,CAAA,MAAA,CAAA,KAAA;AALA,WAAA;AAOA;AACA,OAXA;AAYA,KAbA;AAcA,GA5BA;AA6BA,EAAA,OA7BA,qBA6BA;AACA,SAAA,IAAA,GAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA;AACA,GA/BA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qCAAA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,aAAA;AACA,KAJA;AAKA,IAAA,YALA,wBAKA,SALA,EAKA,GALA,EAKA,GALA,EAKA;AACA,MAAA,YAAA,CAAA,QAAA,GAAA,GAAA;AACA,MAAA,YAAA,CAAA,SAAA,GAAA,GAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,SAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;AAVA;AAhCA,CAAA","sourcesContent":["<template>\n    <div class=\"container chat\">\n        <div class=\"userinfo\">\n            <div class=\"row\">\n                <div class=\"col-md-3\"><img src=\"http://www.gregorydoylefirm.com/wp-content/uploads/blank-profile-pic.jpg\" width=\"80px\"></div>\n                <div class=\"col-md-9\"><h2 class=\"text-primary\">{{ name }}</h2></div>\n            </div>\n        </div>\n        \n        <div class=\"searcharea\">\n            <div class=\"row\">\n                <div class=\"col-md-9\"><input class=\"form-control\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\"/></div>\n                <div class=\"col-md-3\"><button class=\"btn btn-primary\" @click=\"pickLocation()\"> + </button></div>\n            </div>\n        </div>\n        \n        <div class=\"card\">\n            <div class=\"card-body\">\n                <p class=\"text-secondary nomessages\" v-if=\"users.length == 0\">\n                    [No messages yet!]\n                </p>\n                <div class=\"messages\" v-chat-scroll=\"{always: false, smooth: true}\">\n                    <div v-for=\"user in users\" :key=\"user.id\">\n                        <div class=\"chatroom\" @click=\"gotoMessages(user.id, user.lat, user.lng)\">\n                            <h5 class=\"text-info\">{{ user.chatname }}</h5> <br/>\n                            <p>{{ user.lat }} <b> x </b> {{ user.lng }}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- <div class=\"card-action\">\n                <CreateMessage :name=\"name\"/>\n            </div> -->\n        </div>\n    </div>\n</template>\n\n<script>\nimport CreateMessage from '@/components/CreateMessage'\nimport fb from '@/firebase/init'\nimport moment from 'moment'\n\nexport default {\n    name: 'Chat',\n    props: ['lat', 'lng'],\n    components: {\n        CreateMessage\n    },\n    data() {\n        return {\n            users: [],\n            name: \"\",\n        }\n    },\n    created() {\n        let ref = fb.collection('users').orderBy('timestamp');\n        ref.onSnapshot(snapshot => {\n            snapshot.docChanges().forEach(change => {\n                if (change.type = 'added') {\n                    let doc = change.doc;\n                    this.users.push({\n                        id: doc.id,\n                        chatname: doc.data().chatname,\n                        lat: doc.data().lat,\n                        lng: doc.data().lng,\n                        timestamp: moment(doc.data().timestamp).format('LTS')\n                    });\n                }\n            });\n        });\n    },\n    mounted(){\n        this.name = localStorage.getItem('username');\n    },\n    methods: {\n        pickLocation() {\n            console.log(\"Choose the chat location on the map\");\n            this.$root.$emit('setLocation');\n        },\n        gotoMessages(messageid, lat, lng) {\n            localStorage.latitude = lat;\n            localStorage.longitude = lng;\n            localStorage.setItem('ChatId', messageid);\n            this.$router.push({name: 'Messages'});\n        }\n    }\n}\n</script>\n\n<style>\n.chat h2{\n    font-size: 2.6em;\n    margin-bottom: 0px;\n}\n.chat span{\n    font-size: 1.2em;\n}\n.chat .time{\n    display: block;\n    font-size: 0.7em;\n}\n.messages{\n    max-height: 300px;\n    overflow: auto;\n}\n.userinfo{\n    padding: 30px;\n}\n.chatroom {\n    border: 1px solid black;\n}\n.searcharea {\n    padding: 30px;\n}\n</style>"],"sourceRoot":"src/views"}]}